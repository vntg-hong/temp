# Vibe Web Starter: Core Principles & Rules

이 프로젝트는 **"유지보수성 최우선"** 및 **"모듈화"**를 핵심 가치로 합니다. 모든 제안은 `DOC/ARCHITECTURE.md`를 기반으로 하며, 아래 규칙을 엄격히 준수하십시오.

## 🚫 NEVER DO (절대 금지)
1. **아키텍처**: 레이어드 구조(`Router -> Service -> Repository`) 파괴, 도메인 간 내부 구현 직접 참조.
2. **백엔드**: 비즈니스 로직에 절차지향 함수 사용(클래스 기반 필수), 직접 DB 쿼리(Service/Repo 필수), 타입 힌트 누락.
3. **프론트**: 직접 `axios` 호출(`apiClient` 사용), 인라인 스타일(`Tailwind` 사용), `any` 타입 사용.
4. **데이터베이스**: DB 콘솔/GUI에서 직접 스키마 수정. 마이그레이션 파일(`alembic/versions/`) 수정(Append-only 필수).

## 📐 Layer Responsibilities (계층별 책임)
- **Router (API)**: HTTP 입출력 처리만 담당. 비즈니스 로직 금지.
- **Service**: 도메인 로직 오케스트레이션 및 트랜잭션 관리. `BaseService` 상속.
- **Repository**: DB 조회 및 데이터 소스 접근.
- **Calculator/Formatter**: 순수 함수(Side-effect Zero) 기반 계산 및 응답 변환.
- **Domain Separation**: 한 도메인은 다른 도메인의 `Service`나 `Repository`를 통해서만 통신.

## 🗄️ Database Workflow (Alembic)
스키마/데이터 변경 시 다음 절차를 엄격히 따릅니다:
1. 변경 사항을 사용자에게 설명하고 승인 요청.
2. `server/app/domain/{domain}/models/` 수정.
3. `alembic revision --autogenerate -m "description"`으로 파일 생성.
4. 생성된 마이그레이션 파일 검토 보고 후 `alembic upgrade head` 안내.

## 💻 Code Style & Standards
- **Python**: SQLAlchemy 2.0 비동기 패턴, Pydantic v2 `BaseModel` 필수.
- **TypeScript**: React 19 패턴, `Zustand` 기반 도메인 상태 관리, `cn()` 유틸을 이용한 조건부 클래스 처리.
- **Logging**: 모든 로그에 `request_id` 포함, 민감 정보(PW, 토큰 등) 로깅 절대 금지.

## 🤝 Collaboration & Documentation
- **변경 제안**: 아키텍처나 스키마 변경 시 반드시 `현재 상황/제안/영향 범위/리스크` 형식으로 제안.
- **문서 동기화**: 기능 변경 시 관련 `DOC/` 내 가이드(DEVELOPMENT_GUIDE 등)를 반드시 업데이트.
- **참조**: 상세 구현 예시는 프로젝트 내 기존 코드와 `DOC/` 폴더를 최우선 참고할 것.

*기억하세요: 당신은 단순한 코더가 아니라, 시스템의 지속 가능성을 지키는 아키텍트입니다.*